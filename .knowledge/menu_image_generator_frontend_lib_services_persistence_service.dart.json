{"is_source_file": true, "format": "Dart", "description": "This file defines a PersistenceService class that provides an in-memory storage solution for MenuRun objects, including methods for saving, loading, listing, deleting, and clearing runs, with a simple recency index and size cap.", "external_files": ["dart:convert", "package:flutter/foundation.dart", "package:menu_image_generator_frontend/models/models.dart"], "external_methods": ["jsonDecode", "MenuRun.fromJson"], "published": ["PersistenceService"], "classes": [{"name": "PersistenceService", "description": "Singleton class providing in-memory storage for MenuRun objects with methods to save, load, list, delete, and clear runs, maintaining recency order and size limit."}], "methods": [{"name": "saveRun", "description": "Asynchronously saves a MenuRun object to in-memory storage, updating recency order and enforcing a maximum number of stored runs."}, {"name": "loadRun", "description": "Asynchronously loads a MenuRun object by its ID, returning null if not found or if an error occurs during decoding."}, {"name": "listRuns", "description": "Asynchronously returns a list of all saved MenuRun objects ordered from most recent to oldest."}, {"name": "deleteRun", "description": "Deletes a MenuRun object from storage by its ID."}, {"name": "clear", "description": "Clears all stored MenuRun objects and recency list; primarily used for testing."}, {"name": "_resortByTimestampDesc", "description": "Private method to sort the recency list by timestamp descending based on stored MenuRun data."}], "calls": ["Future.delayed", "Map.containsKey", "Map.set", "Map.remove", "MenuRun.toJsonString", "MenuRun.fromJson", "jsonDecode"], "search-terms": ["PersistenceService", "in-memory store", "saveRun", "listRuns", "deleteRun", "menu image generator"], "state": 2, "file_id": 42, "knowledge_revision": 140, "git_revision": "", "revision_history": [{"138": ""}, {"140": ""}], "hash": "1ea178e644c4571e852ffc0d3ea99568", "format-version": 4, "code-base-name": "menu_image_generator_frontend", "filename": "menu_image_generator_frontend/lib/services/persistence_service.dart"}